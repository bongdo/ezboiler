(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{6187:(e,t,s)=>{Promise.resolve().then(s.bind(s,7747))},7747:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(5155),l=s(1584),a=s(7396);function n(){let{items:e,removeItem:t,clearCart:s,total:n}=(0,l._)();return 0===e.length?(0,r.jsxs)("div",{className:"container mx-auto px-4 py-16 text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Корзина пуста"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"Вы еще ничего не добавили в корзину."}),(0,r.jsx)(a.default,{href:"/catalog",className:"inline-block bg-primary text-white px-8 py-3 rounded-full font-bold hover:bg-rose-700 transition",children:"Перейти в каталог"})]}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Корзина"}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,r.jsxs)("div",{className:"flex-grow space-y-4",children:[e.map(e=>(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border flex flex-col sm:flex-row items-center gap-4",children:[(0,r.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded flex-shrink-0 relative overflow-hidden",children:e.image?(0,r.jsx)("img",{src:e.image,alt:e.name,className:"object-cover w-full h-full"}):(0,r.jsx)("div",{className:"flex items-center justify-center h-full text-xs text-gray-400",children:"No Image"})}),(0,r.jsxs)("div",{className:"flex-grow text-center sm:text-left",children:[(0,r.jsx)(a.default,{href:"/product/".concat(e.vendor_code),className:"font-bold text-lg hover:text-primary transition",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Артикул: ",e.vendor_code]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("span",{className:"font-medium",children:[e.quantity," шт."]}),(0,r.jsxs)("span",{className:"font-bold text-lg whitespace-nowrap",children:[(e.price*e.quantity).toLocaleString("ru-RU")," ₽"]}),(0,r.jsx)("button",{onClick:()=>t(e.vendor_code),className:"text-red-500 hover:text-red-700 p-2",children:"Удалить"})]})]},e.vendor_code)),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-sm underline",children:"Очистить корзину"})})]}),(0,r.jsx)("div",{className:"w-full lg:w-80 flex-shrink-0",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border sticky top-24",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Итого"}),(0,r.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,r.jsxs)("span",{children:["Товары (",e.length,")"]}),(0,r.jsxs)("span",{children:[n.toLocaleString("ru-RU")," ₽"]})]}),(0,r.jsxs)("div",{className:"border-t my-4 pt-4 flex justify-between font-bold text-xl",children:[(0,r.jsx)("span",{children:"К оплате"}),(0,r.jsxs)("span",{className:"text-primary",children:[n.toLocaleString("ru-RU")," ₽"]})]}),(0,r.jsx)("button",{className:"w-full bg-primary hover:bg-rose-700 text-white font-bold py-3 rounded-full transition mb-4",children:"Оформить заказ"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Нажимая кнопку, вы соглашаетесь с условиями обработки персональных данных"})]})})]})]})}},1584:(e,t,s)=>{"use strict";s.d(t,{_:()=>c,e:()=>n});var r=s(5155),l=s(2115);let a=(0,l.createContext)(void 0);function n(e){let{children:t}=e,[s,n]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{n(JSON.parse(e))}catch(e){console.error("Failed to parse cart",e)}},[]),(0,l.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(s))},[s]);let c=s.reduce((e,t)=>e+t.price*t.quantity,0);return(0,r.jsx)(a.Provider,{value:{items:s,addItem:e=>{n(t=>t.find(t=>t.vendor_code===e.vendor_code)?t.map(t=>t.vendor_code===e.vendor_code?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeItem:e=>{n(t=>t.filter(t=>t.vendor_code!==e))},clearCart:()=>n([]),total:c},children:t})}function c(){let e=(0,l.useContext)(a);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},7396:(e,t,s)=>{"use strict";s.d(t,{default:()=>l.a});var r=s(4839),l=s.n(r)}},e=>{var t=t=>e(e.s=t);e.O(0,[839,441,517,358],()=>t(6187)),_N_E=e.O()}]);